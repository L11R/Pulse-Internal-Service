'use strict';

try {
    var sock = new WebSocket('ws://' + window.location.host + '/ui/ws');
} catch (err) {
    var sock = new WebSocket('wss://' + window.location.host + '/ui/ws');
}

sock.onopen = function () {
    console.log('Connection to server started');
};

// income message handler
sock.onmessage = function (event) {
    console.log(event);
    var obj = JSON.parse(event.data);
    console.log(obj);

    if (obj.do_reload == true) {
        document.location.reload(true);
    } else {
        document.getElementById("pay_accepted").innerHTML = obj.pay_accepted;
        document.getElementById("pay_remain").innerHTML = obj.pay_remain;
    }
};

sock.onclose = function (event) {
    if (event.wasClean) {
        console.log('Clean connection end');
    } else {
        console.log('Connection broken');
    }
};

sock.onerror = function (error) {
    console.log(error);
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBheW1lbnQvcGF5X2Nhc2hfaW5fcHJvZ3Jlc3MuanMiXSwibmFtZXMiOlsic29jayIsIldlYlNvY2tldCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImVyciIsIm9ub3BlbiIsImNvbnNvbGUiLCJsb2ciLCJvbm1lc3NhZ2UiLCJldmVudCIsIm9iaiIsIkpTT04iLCJwYXJzZSIsImRhdGEiLCJkb19yZWxvYWQiLCJkb2N1bWVudCIsInJlbG9hZCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwicGF5X2FjY2VwdGVkIiwicGF5X3JlbWFpbiIsIm9uY2xvc2UiLCJ3YXNDbGVhbiIsIm9uZXJyb3IiLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFHO0FBQ0QsUUFBSUEsT0FBTyxJQUFJQyxTQUFKLENBQWMsVUFBVUMsT0FBT0MsUUFBUCxDQUFnQkMsSUFBMUIsR0FBaUMsUUFBL0MsQ0FBWDtBQUNELENBRkQsQ0FHQSxPQUFNQyxHQUFOLEVBQVU7QUFDUixRQUFJTCxPQUFPLElBQUlDLFNBQUosQ0FBYyxXQUFXQyxPQUFPQyxRQUFQLENBQWdCQyxJQUEzQixHQUFrQyxRQUFoRCxDQUFYO0FBQ0Q7O0FBR0RKLEtBQUtNLE1BQUwsR0FBYyxZQUFVO0FBQ3RCQyxZQUFRQyxHQUFSLENBQVksOEJBQVo7QUFDRCxDQUZEOztBQUlBO0FBQ0FSLEtBQUtTLFNBQUwsR0FBaUIsVUFBU0MsS0FBVCxFQUFnQjtBQUM3QkgsWUFBUUMsR0FBUixDQUFZRSxLQUFaO0FBQ0EsUUFBSUMsTUFBTUMsS0FBS0MsS0FBTCxDQUFXSCxNQUFNSSxJQUFqQixDQUFWO0FBQ0FQLFlBQVFDLEdBQVIsQ0FBWUcsR0FBWjs7QUFFQSxRQUFHQSxJQUFJSSxTQUFKLElBQWUsSUFBbEIsRUFBdUI7QUFDbkJDLGlCQUFTYixRQUFULENBQWtCYyxNQUFsQixDQUF5QixJQUF6QjtBQUNILEtBRkQsTUFFTztBQUNIRCxpQkFBU0UsY0FBVCxDQUF3QixjQUF4QixFQUF3Q0MsU0FBeEMsR0FBb0RSLElBQUlTLFlBQXhEO0FBQ0FKLGlCQUFTRSxjQUFULENBQXdCLFlBQXhCLEVBQXNDQyxTQUF0QyxHQUFrRFIsSUFBSVUsVUFBdEQ7QUFDSDtBQUVKLENBWkQ7O0FBY0FyQixLQUFLc0IsT0FBTCxHQUFlLFVBQVNaLEtBQVQsRUFBZTtBQUM1QixRQUFHQSxNQUFNYSxRQUFULEVBQWtCO0FBQ2RoQixnQkFBUUMsR0FBUixDQUFZLHNCQUFaO0FBQ0gsS0FGRCxNQUVLO0FBQ0RELGdCQUFRQyxHQUFSLENBQVksbUJBQVo7QUFDSDtBQUNGLENBTkQ7O0FBUUFSLEtBQUt3QixPQUFMLEdBQWUsVUFBU0MsS0FBVCxFQUFlO0FBQzVCbEIsWUFBUUMsR0FBUixDQUFZaUIsS0FBWjtBQUNELENBRkQiLCJmaWxlIjoicGF5bWVudC9wYXlfY2FzaF9pbl9wcm9ncmVzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbInRyeXtcbiAgdmFyIHNvY2sgPSBuZXcgV2ViU29ja2V0KCd3czovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArICcvdWkvd3MnKTtcbn1cbmNhdGNoKGVycil7XG4gIHZhciBzb2NrID0gbmV3IFdlYlNvY2tldCgnd3NzOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgJy91aS93cycpO1xufVxuXG5cbnNvY2sub25vcGVuID0gZnVuY3Rpb24oKXtcbiAgY29uc29sZS5sb2coJ0Nvbm5lY3Rpb24gdG8gc2VydmVyIHN0YXJ0ZWQnKVxufVxuXG4vLyBpbmNvbWUgbWVzc2FnZSBoYW5kbGVyXG5zb2NrLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgY29uc29sZS5sb2coZXZlbnQpO1xuICAgIHZhciBvYmogPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgIGNvbnNvbGUubG9nKG9iaik7XG5cbiAgICBpZihvYmouZG9fcmVsb2FkPT10cnVlKXtcbiAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGF5X2FjY2VwdGVkXCIpLmlubmVySFRNTCA9IG9iai5wYXlfYWNjZXB0ZWQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGF5X3JlbWFpblwiKS5pbm5lckhUTUwgPSBvYmoucGF5X3JlbWFpbjtcbiAgICB9XG5cbn07XG5cbnNvY2sub25jbG9zZSA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgaWYoZXZlbnQud2FzQ2xlYW4pe1xuICAgICAgY29uc29sZS5sb2coJ0NsZWFuIGNvbm5lY3Rpb24gZW5kJylcbiAgfWVsc2V7XG4gICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBicm9rZW4nKVxuICB9XG59O1xuXG5zb2NrLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcil7XG4gIGNvbnNvbGUubG9nKGVycm9yKTtcbn0iXX0=
